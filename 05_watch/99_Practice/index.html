<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <title>Vue v-model 이해하기</title>
  </head>
  <body>
    <div id="change_view">
      <input type="text" v-model="label" />
      <img v-if="emoji" :src="emoji" alt="Emoji">
    </div>
    <script>
      const { createApp, ref,reactive, watch, watchEffect } = Vue;

      createApp({
          setup() {
              // input의 값을 입력기 위함
              const label = ref("");
              // 이미지를 보여주기 위함
              const emoji = ref();
              // image 목록을 받아오기 위함
              let emojis = reactive({});

              // 초기 데이터 목록을 받아오기 위함
              // 이렇게 안해도 상관없으나 오늘 복습을 위함
              watchEffect(async () => {
                  emojis = await fetch("https://api.github.com/emojis")
                      .then(response => response.json())
                      .then(data => data);
                      
              });

              watchEffect(() => {
                emoji.value = emojis[label.value];
                });

                return { label, emoji };
                
            }
      }).mount("#change_view");
    </script>
  </body>
</html>
<!--

  1. 반응형 데이터 입력 받음(인풋)
  2. 입력 받은 데이터 emojis에 업데이트

-->